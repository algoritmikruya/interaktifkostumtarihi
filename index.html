<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moda ve Mimari Tarihi</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Inter fontunu kullan */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FFF5E0; /* Çok açık kayısı rengi arka plan */
            color: #333333; /* Koyu gri metin */
        }
        /* Özel stil eklemeleri */
        .timeline-item {
            cursor: pointer;
            transition: transform 0.3s ease-in-out;
        }
        .timeline-item:hover {
            transform: translateY(-5px);
        }
        .card {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Daha hafif gölge */
            border-radius: 12px; /* Daha yuvarlak köşeler */
        }
        .image-container {
            position: relative;
            padding-bottom: 75%; /* 4:3 en boy oranı için. Bu değer, genişlik-tabanlı bir orandır. */
            height: 0;
            overflow: hidden;
            border-radius: 8px;
            background-color: #f0f0f0; /* Resim sığdırıldığında boş kalan alan için hafif bir arka plan */
            display: flex; /* Resmin ortalanması için flexbox kullan */
            align-items: center; /* Dikeyde ortala */
            justify-content: center; /* Yatayda ortala */
        }
        .image-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; /* Resmi kutuya sığdır, kırpma yapma */
            transition: transform 0.2s ease-in-out; /* Resme tıklayınca animasyon için geçiş */
            cursor: pointer; /* Görselin tıklanabilir olduğunu belirtmek için */
        }
        .image-container img.clicked {
            transform: scale(1.05); /* Tıklama animasyonu: Hafifçe büyüt */
        }
        .insight-text {
            margin-top: 1rem;
            padding: 0.75rem;
            background-color: #FEF3C7; /* Açık kayısı tonu */
            border-left: 4px solid #FDBA74; /* Daha koyu kayısı tonu */
            color: #4A5568; /* Koyu gri metin */
            font-size: 0.9rem;
            border-radius: 4px;
            display: none; /* Başlangıçta gizli */
        }
        .loading-indicator {
            display: none;
            margin-top: 0.5rem;
            font-style: italic;
            color: #9ca3af; /* Açık gri */
        }
        .image-loading-indicator {
            display: none;
            margin-top: 0.5rem;
            font-style: italic;
            color: #9ca3af; /* Açık gri */
            text-align: center;
        }
        .adaptation-text {
            margin-top: 1rem;
            padding: 0.75rem;
            background-color: #D1FAE5; /* Açık yeşil tonu */
            border-left: 4px solid #34D399; /* Daha koyu yeşil tonu */
            color: #10B981; /* Koyu yeşil metin */
            font-size: 0.9rem;
            border-radius: 4px;
            display: none; /* Başlangıçta gizli */
        }
        .error-message {
            color: #EF4444; /* Kırmızı renk */
            background-color: #FEE2E2; /* Açık kırmızı arka plan */
            border-left: 4px solid #DC2626; /* Koyu kırmızı kenarlık */
            padding: 0.75rem;
            margin-top: 0.5rem;
            border-radius: 4px;
            display: none;
        }


        /* Full-screen modal for image display */
        .image-modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 100; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.95); /* Daha koyu arka plan */
            display: flex; /* Use flexbox for centering */
            align-items: center; /* Center vertically */
            justify-content: center; /* Center horizontally */
        }

        .image-modal-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
            object-fit: contain; /* Ensure image fits without cropping */
        }

        .image-modal-close {
            position: absolute;
            top: 20px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
        }

        .image-modal-close:hover,
        .image-modal-close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        /* Filigran arka plan */
        .watermark-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* İçeriğin arkasında kalmasını sağlar */
            opacity: 0.1; /* Filigran etkisi için şeffaflık */
            background-image: url('https://placehold.co/1000x1000/FFF5E0/E0E0E0?text=Kostum+Siluetleri'); /* Geçici yer tutucu görsel */
            background-repeat: repeat; /* Görseli tekrarlar */
            background-size: 200px; /* Görselin boyutunu ayarlar */
            /* Buraya çeşitli dönemlerden kostüm siluetlerini içeren kendi görselinizi ekleyebilirsiniz. */
            /* Örnek: background-image: url('path/to/your/costume-silhouettes.png'); */
            /* Görseliniz şeffaf bir PNG veya SVG olursa daha iyi sonuç verir. */
        }
    </style>
</head>
<body class="p-6">
    <div class="watermark-background"></div> <!-- Filigran arka planı -->

    <header class="text-center mb-10 p-6 bg-gradient-to-r from-orange-100 to-yellow-100 text-gray-800 rounded-xl shadow-lg">
        <h1 class="text-5xl font-extrabold mb-2 leading-tight">İNTERAKTİF KOSTÜM TARİHİ</h1>
        <p class="text-xl font-light text-gray-700">Dikiş Makinasından, Zaman Makinasına.<br>▸ Tarihe Tıkla ▸ Algoritmanın Diktiğini Giy ▸ Trendi Sen Başlat</p>
    </header>

    <main class="container mx-auto">
        <!-- Zaman Çizelgesi Bölümü -->
        <section id="timeline" class="mb-12 bg-white p-8 rounded-xl card">
            <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">Tarihsel Dönemler</h2>
            <div id="timeline-container" class="flex flex-wrap justify-center gap-6">
                <!-- Dönemler buraya JavaScript ile eklenecek -->
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="paleolitik">
                    Paleolitik Çağ
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="antik-misir">
                    Antik Mısır
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="roma-imparatorlugu">
                    Roma İmparatorluğu
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="orta-cag">
                    Orta Çağ
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="ronesans">
                    Rönesans
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="barok">
                    Barok Dönem (17. YY)
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="rokoko">
                    Rokoko Dönem (18. YY Ortası)
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="fransiz-ihtilali">
                    Fransız İhtilali ve Regence
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="viktorya">
                    Viktorya Dönemi (19. YY)
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="art-nouveau">
                    Art Nouveau / Belle Époque
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="1920ler">
                    1920'ler (Caz Çağı)
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="1940lar">
                    1940'lar (Savaş Yılları)
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="1950ler">
                    1950'ler (Rock'n Roll)
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="1970ler">
                    1970'ler (Disko ve Hippie)
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="1980ler">
                    1980'ler (Neşeli Yıllar)
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="gunumuz">
                    Günümüz
                </div>
                <div class="timeline-item bg-orange-200 hover:bg-orange-300 text-gray-800 p-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 text-center text-lg font-medium" data-era="yakin-gelecek">
                    Yakın Gelecek
                </div>
            </div>
        </section>

        <!-- Dönem Detayları Bölümü -->
        <section id="era-details" class="bg-white p-8 rounded-xl card hidden">
            <h2 id="era-title" class="text-4xl font-bold text-center mb-6 text-gray-800"></h2>

            <!-- Kostüm Görselleri -->
            <div class="mb-8">
                <h3 class="text-2xl font-semibold mb-4 text-gray-700 border-b-2 pb-2">Kostümler</h3>
                <div id="costume-images" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Kostüm görselleri buraya JavaScript ile eklenecek -->
                </div>
            </div>

            <!-- Mimari Temelleri -->
            <div>
                <h3 class="text-2xl font-semibold mb-4 text-gray-700 border-b-2 pb-2">Mimari Temelleri</h3>
                <div id="architecture-details" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Mimari detaylar buraya JavaScript ile eklenecek -->
                </div>
            </div>
            <button id="back-to-timeline" class="mt-8 bg-gray-700 hover:bg-gray-900 text-white font-bold py-2 px-4 rounded-full transition-colors duration-300">
                Zaman Çizelgesine Geri Dön
            </button>
        </section>
    </main>

    <!-- Full-screen image modal -->
    <div id="imageModal" class="image-modal">
        <span class="image-modal-close" id="closeModal">&times;</span>
        <img class="image-modal-content" id="modalImage">
    </div>

    <!-- Footer Bölümü -->
    <footer class="text-center mt-10 p-6 bg-gradient-to-r from-gray-900 to-black text-gray-400 rounded-xl shadow-lg">
        <p class="text-sm">© 2025 Fikir ve Tasarım: Şebnem İlker. Yapay Zeka Destekli Geliştirme: Gemini</p>
    </footer>

    <!-- Ziyaretçi Sayacı Bölümü -->
    <div class="fixed bottom-4 right-4 text-right text-gray-600">
        <p class="text-sm">Toplam Ziyaretçi Sayısı: <span id="visitor-count" class="font-bold">0</span></p>
    </div>

    <script type="module">
        // Firebase SDK'larını içe aktar
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, updateDoc, increment, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        document.addEventListener('DOMContentLoaded', async () => {
            const timelineItems = document.querySelectorAll('.timeline-item');
            const timelineSection = document.getElementById('timeline');
            const eraDetailsSection = document.getElementById('era-details');
            const eraTitle = document.getElementById('era-title');
            const costumeImagesContainer = document.getElementById('costume-images');
            const architectureDetailsContainer = document.getElementById('architecture-details');
            const backToTimelineButton = document.getElementById('back-to-timeline');

            const imageModal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const closeModal = document.getElementById('closeModal');

            const visitorCountElement = document.getElementById('visitor-count'); // Ziyaretçi sayacı elementini bir kez al

            // Firebase Yapılandırması ve Başlatılması
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');

            let app;
            let db;
            let auth;

            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                // Kullanıcıyı anonim olarak oturum aç
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token !== '') {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }

                // Ziyaretçi sayacını güncelle (eğer Firestore kullanılıyorsa)
                if (visitorCountElement) { // Elementin varlığını kontrol et
                    const counterDocRef = doc(db, `artifacts/${appId}/public/data/visitor_counter/total_visits`);
                    await setDoc(counterDocRef, { count: increment(1) }, { merge: true });

                    // Ziyaretçi sayacını gerçek zamanlı dinle
                    onSnapshot(counterDocRef, (docSnap) => {
                        if (docSnap.exists()) {
                            visitorCountElement.textContent = docSnap.data().count;
                        } else {
                            visitorCountElement.textContent = '0';
                        }
                    });
                } else {
                    console.error("Ziyaretçi sayacı elementi (ID 'visitor-count') DOM'da bulunamadı. Ziyaretçi sayısı gösterilmeyecektir.");
                }

            } catch (error) {
                console.error("Firebase başlatılırken veya oturum açılırken hata oluştu:", error);
                if (visitorCountElement) { // Elementin varlığını kontrol et
                    visitorCountElement.textContent = 'Hata!';
                }
            }

            // Dönem verilerini burada tutacağız
            const erasData = {
                "paleolitik": {
                    title: "Paleolitik Çağ (Eski Taş Çağı)",
                    description: "İnsanlık tarihinin en uzun dönemi olan Paleolitik Çağ, avcı-toplayıcı yaşam tarzı ve basit taş aletlerle karakterize edilir.",
                    influencers: ["Mağara Ressamları", "İlkel Zanaatkarlar"],
                    costumes: [
                        { type: "Kadın", description: "Hayvan derilerinden yapılmış, ilkel dikişlerle birleştirilmiş giysiler.", imagePlaceholder: "Paleolitik Kadın Kostümü" },
                        { type: "Erkek", description: "Hayvan derilerinden ve postlarından yapılmış basit giysiler.", imagePlaceholder: "Paleolitik Erkek Kostümü" },
                        { type: "Halk", description: "Genel olarak avlanan hayvanların derileri ve bitkisel lifler kullanılırdı.", imagePlaceholder: "Paleolitik Halk Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Bu dönemde kalıcı yapılar yerine, mağaralar ve geçici barınaklar kullanılırdı. Mağara resimleri, dönemin sanatsal ifadesini yansıtır.", imagePlaceholder: "Paleolitik Mimari" }
                    ]
                },
                "antik-misir": {
                    title: "Antik Mısır",
                    description: "Mısır uygarlığı, Nil Nehri çevresinde gelişmiş, piramitleri, hiyeroglifleri ve tanrı-kral inançlarıyla tanınır.",
                    influencers: ["Imhotep (Mimar)", "Dönemin Zanaatkarları"],
                    costumes: [
                        { type: "Kadın", description: "Ketenden yapılmış, genellikle beyaz renkli, drapeli elbiseler.", imagePlaceholder: "Antik Mısır Kadın Kostümü" },
                        { type: "Erkek", description: "Ketenden yapılmış, 'şenti' adı verilen etek benzeri giysiler.", imagePlaceholder: "Antik Mısır Erkek Kostümü" },
                        { type: "Saray/Üst Sınıf", description: "Daha ince ketenler, mücevherler ve peruklarla süslenmiş giysiler.", imagePlaceholder: "Antik Mısır Saray Kostümü" },
                        { type: "Askeri", description: "Basit keten etekler, deri zırhlar ve kalkanlar.", imagePlaceholder: "Antik Mısır Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Piramitler, tapınaklar ve büyük heykeller, dönemin mimarisinin temelini oluşturur. Taş işçiliği ve monumental yapılar öne çıkar.", imagePlaceholder: "Antik Mısır Mimari" }
                    ]
                },
                "roma-imparatorlugu": {
                    title: "Roma İmparatorluğu",
                    description: "Antik Roma, geniş toprakları, gelişmiş hukuk sistemi, mühendislik harikaları ve askeri gücüyle bilinir.",
                    influencers: ["Vitruvius (Mimar ve Yazar)", "Bilinmeyen Roma Mühendisleri"],
                    costumes: [
                        { type: "Kadın", description: "Stola ve palla gibi drapeli yün ve keten giysiler.", imagePlaceholder: "Roma Kadın Kostümü" },
                        { type: "Erkek", description: "Toga, tunik gibi yün giysiler.", imagePlaceholder: "Roma Erkek Kostümü" },
                        { type: "Saray/Üst Sınıf", description: "Mor renkler, ipek ve altın işlemelerle süslenmiş daha gösterişli giysiler.", imagePlaceholder: "Roma Saray Kostümü" },
                        { type: "Askeri", description: "Zırhlar, kasklar ve kalkanlarla donatılmış lejyoner kıyafetleri.", imagePlaceholder: "Roma Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Kemerler, kubbeler, beton kullanımı, amfi tiyatrolar, hamamlar ve yollar Roma mimarisinin karakteristik özellikleridir.", imagePlaceholder: "Roma Mimari" }
                    ]
                },
                "orta-cag": {
                    title: "Orta Çağ",
                    description: "Avrupa'da Roma İmparatorluğu'nın çöküşünden Rönesans'a kadar süren dönem. Feodalizm, kilisenin etkisi ve şövalyeler dönemi.",
                    influencers: ["Cimabue (Ressam)", "Giotto (Ressam)", "Anonim Gotik Mimarlar"],
                    costumes: [
                        { type: "Kadın", description: "Uzun elbiseler, genellikle yün veya keten. Başörtüleri yaygındı.", imagePlaceholder: "Orta Çağ Kadın Kostümü" },
                        { type: "Erkek", description: "Tunikler, pantolonlar (hose) ve pelerinler.", imagePlaceholder: "Orta Çağ Erkek Kostümü" },
                        { type: "Halk", description: "Basit, dayanıklı yün giysiler. Köylü yaşam tarzını yansıtır.", imagePlaceholder: "Orta Çağ Halk Kostümü" },
                        { type: "Saray/Üst Sınıf", description: "Daha zengin kumaşlar (ipek, kadife), süslü işlemeler ve gösterişli şapkalar.", imagePlaceholder: "Orta Çağ Saray Kostümü" },
                        { type: "Askeri", description: "Zırhlar (zincir zırh, levha zırh), miğferler ve kılıçlar.", imagePlaceholder: "Orta Çağ Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Romanesk ve Gotik mimari tarzları öne çıkar. Kaleler, katedraller ve surlarla çevrili şehirler inşa edilmiştir.", imagePlaceholder: "Orta Çağ Mimari" }
                    ]
                },
                "ronesans": {
                    title: "Rönesans",
                    description: "14. yüzyıldan 17. yüzyıla kadar süren, sanat, bilim, felsefe ve mimaride büyük bir canlanma dönemi.",
                    influencers: ["Leonardo da Vinci (Ressam, Mimar, Bilim Adamı)", "Michelangelo (Ressam, Heykeltıraş, Mimar)", "Raphael (Ressam)", "Donatello (Heykiltıraş)", "Filippo Brunelleschi (Mimar)"],
                    costumes: [
                        { type: "Kadın", description: "Bol etekler, korsajlar, kabarık kollar ve gösterişli şapkalar. Kumaşlar daha zengin ve işlemeliydi.", imagePlaceholder: "Rönesans Kadın Kostümü" },
                        { type: "Erkek", description: "Dubleler, kabarık pantolonlar (breeches), pelerinler ve geniş yakalar.", imagePlaceholder: "Rönesans Erkek Kostümü" },
                        { type: "Halk", description: "Daha basit kumaşlar ve kesimlerle günlük giysiler.", imagePlaceholder: "Rönesans Halk Kostümü" },
                        { type: "Saray/Üst Sınıf", description: "Lüks kumaşlar (ipek, kadife), inciler, işlemeler ve süslü yakalar.", imagePlaceholder: "Rönesans Saray Kostümü" },
                        { type: "Askeri", description: "Levha zırhlar, daha hafif ve hareketli tasarımlar. Tüfekler ve tabancalar ortaya çıkmaya başladı.", imagePlaceholder: "Rönesans Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Klasik antikitenin yeniden canlanması. Simetri, oran, sütunlar, kubbeler ve revaklar ön plana çıktı. Filippo Brunelleschi ve Andrea Palladio gibi mimarlar öne çıktı.", imagePlaceholder: "Rönesans Mimari" }
                    ]
                },
                "barok": {
                    title: "Barok Dönem (17. Yüzyıl)",
                    description: "17. yüzyılda Avrupa'da ortaya çıkan Barok sanat ve mimarisi, dramatik etki, ihtişam ve hareketlilikle karakterize edilir.",
                    influencers: ["Gian Lorenzo Bernini (Heykeltıraş, Mimar)", "Caravaggio (Ressam)", "Rembrandt (Ressam)", "Peter Paul Rubens (Ressam)"],
                    costumes: [
                        { type: "Kadın", description: "Geniş etekler, gösterişli dekolteler, danteller ve kurdelelerle süslenmiş abartılı elbiseler.", imagePlaceholder: "Barok Kadın Kostümü" },
                        { type: "Erkek", description: "Geniş kollar, dantelli yakalar, diz pantolonları (culottes) ve işlemeli ceketler. Uzun peruklar yaygındı.", imagePlaceholder: "Barok Erkek Kostümü" },
                        { type: "Saray/Üst Sınıf", description: "İpek, kadife gibi zengin kumaşlar, altın ve gümüş işlemelerle dolu, gösterişli kıyafetler.", imagePlaceholder: "Barok Saray Kostümü" },
                        { type: "Askeri", description: "Daha süslü üniformalar, geniş şapkalar ve botlar. Zırhlar yavaş yavaş azalırken, kumaş giysiler öne çıktı.", imagePlaceholder: "Barok Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Kıvrımlı formlar, zengin süslemeler, büyük ölçekli yapılar ve dramatik ışık-gölge kullanımı. Roma'daki Aziz Petrus Bazilikası gibi yapılar örnek verilebilir.", imagePlaceholder: "Barok Mimari" }
                    ]
                },
                "rokoko": {
                    title: "Rokoko Dönem (18. Yüzyıl Ortası)",
                    description: "Barok'un abartılı ihtişamından daha hafif, zarif ve eğlenceli bir tarza geçiş. Pastel renkler ve asimetrik süslemeler yaygındı.",
                    influencers: ["Antoine Watteau (Ressam)", "Jean-Honoré Fragonard (Ressam)", "François Boucher (Ressam)", "Balthasar Neumann (Mimar)"],
                    costumes: [
                        { type: "Kadın", description: "Çok geniş etekler (panniers), narin danteller, kurdeleler, pastel renkler ve zarif nakışlar. Küçük, süslü şapkalar.", imagePlaceholder: "Rokoko Kadın Kostümü" },
                        { type: "Erkek", description: "Daha dar kesim ceketler (justaucorps), işlemeli yelekler, diz pantolonları. Tozlu peruklar ve üç köşeli şapkalar.", imagePlaceholder: "Rokoko Erkek Kostümü" },
                        { type: "Saray/Üst Sınıf", description: "İpek ve saten gibi lüks kumaşlardan yapılmış, dantel ve kurdelelerle süslü, zarif ve göz alıcı kıyafetler.", imagePlaceholder: "Rokoko Saray Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "İç mekanlara odaklı, daha hafif ve süslü bir tarz. Pastel renkler, kıvrımlı hatlar, ayna ve yaldızlı süslemeler. Fransa'daki Petit Trianon örnek verilebilir.", imagePlaceholder: "Rokoko Mimari" }
                    ]
                },
                "fransiz-ihtilali": {
                    title: "Fransız İhtilali ve Regence (18. YY Sonu - 19. YY Başı)",
                    description: "Sosyal ve siyasi değişimlerin giyimi de etkilediği, daha sade ve klasik tarzlara yönelişin olduğu dönem. Napoleon dönemi de kapsar.",
                    influencers: ["Jacques-Louis David (Ressam)", "Robert Adam (Mimar)"],
                    costumes: [
                        { type: "Kadın", description: "Yüksek belli, dökümlü 'Empire' tarzı elbiseler, genellikle beyaz veya açık renklerde. Kumaşlar daha hafif.", imagePlaceholder: "Fransız İhtilali Kadın Kostümü" },
                        { type: "Erkek", description: "Daha dar kesim pantolonlar, kuyruklu ceketler ve yelekler. Peruklar azalır, doğal saç modelleri popülerleşir.", imagePlaceholder: "Fransız İhtilali Erkek Kostümü" },
                        { type: "Halk", description: "Devrimin etkisiyle daha sade ve işlevsel giysiler.", imagePlaceholder: "Fransız İhtilali Halk Kostümü" },
                        { type: "Askeri", description: "Napolyon Savaşları'nın etkisiyle daha standart ve resmi üniformalar.", imagePlaceholder: "Fransız İhtilali Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Neoklasik mimarinin yükselişi. Antik Yunan ve Roma formlarına dönüş, simetri, oran ve sadelik ön plandaydı.", imagePlaceholder: "Fransız İhtilali Mimari" }
                    ]
                },
                "viktorya": {
                    title: "Viktorya Dönemi (19. Yüzyıl)",
                    description: "Kraliçe Victoria'nın hüküm sürdüğü dönem (1837-1901). Sanayi Devrimi, katı sosyal kurallar ve giyimde ihtişam ve zarafet.",
                    influencers: ["William Morris (Arts and Crafts Hareketi)", "John Ruskin (Sanat Eleştirmeni)", "Augustus Pugin (Mimar)"],
                    costumes: [
                        { type: "Kadın", description: "Büyük kabarık etekler (krinolin, arkadan kabarık), korseyle daraltılmış beller, yüksek yakalar, danteller ve fırfırlar.", imagePlaceholder: "Viktorya Kadın Kostümü" },
                        { type: "Erkek", description: "Kuyruklu ceketler, yelekler, kravatlar ve yüksek şapkalar (silindir şapka). Resmi ve şık giyim.", imagePlaceholder: "Viktorya Erkek Kostümü" },
                        { type: "Halk", description: "Daha sade, pratik yün ve pamuklu giysiler. İş kıyafetleri ve günlük elbiseler.", imagePlaceholder: "Viktorya Halk Kostümü" },
                        { type: "Saray/Üst Sınıf", description: "İpek, saten, kadife gibi pahalı kumaşlar, işlemeler ve mücevherlerle dolu abartılı kıyafetler. Gündüz ve gece giysileri ayrımı.", imagePlaceholder: "Viktorya Saray Kostümü" },
                        { type: "Askeri", description: "Çeşitli sömürge savaşları ve askeri genişlemelerle birlikte farklılaşan üniformalar.", imagePlaceholder: "Viktorya Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Gotik Canlanma, Neoklasik, İtalyanlaştırma gibi eklektik tarzlar bir aradaydı. Büyük kamu binaları, kiliseler ve konutlar inşa edildi.", imagePlaceholder: "Viktorya Mimari" }
                    ]
                },
                "art-nouveau": {
                    title: "Art Nouveau / Belle Époque (19. YY Sonu - 20. YY Başı)",
                    description: "19. yüzyılın sonu ve 20. yüzyılın başında ortaya çıkan, doğal formlar, kıvrımlı çizgiler ve sanatsal süslemelerle karakterize edilen sanat akımı.",
                    influencers: ["Gustav Klimt (Ressam)", "Alphonse Mucha (Grafik Sanatçısı)", "Antoni Gaudí (Mimar)", "Victor Horta (Mimar)"],
                    costumes: [
                        { type: "Kadın", description: "S-şekilli silüetler, dar beller, uzun, akıcı elbiseler. Doğal çiçek ve bitki motifleri işlemelerde yaygındı.", imagePlaceholder: "Art Nouveau Kadın Kostümü" },
                        { type: "Erkek", description: "Daha rahat kesimli takım elbiseler, silindir şapkalar azalırken daha yumuşak şapkalar popülerleşti. Kumaşlar ve desenler daha çeşitliydi.", imagePlaceholder: "Art Nouveau Erkek Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Binalarda demir, cam ve kiremit kullanımıyla organik, kıvrımlı hatlar ve dekoratif süslemeler. Victor Horta ve Antoni Gaudí'nin eserleri örnek verilebilir.", imagePlaceholder: "Art Nouveau Mimari" }
                    ]
                },
                "1920ler": {
                    title: "1920'ler (Caz Çağı)",
                    description: "Birinci Dünya Savaşı sonrası refah ve sosyal değişimlerin yaşandığı, Caz müziği ve 'flapper' modasının yükseldiği dönem.",
                    influencers: ["Tamara de Lempicka (Ressam)", "William Van Alen (Mimar)"],
                    costumes: [
                        { type: "Kadın", description: "Düşük belli, diz hizasında, püsküllü ve boncuklu 'flapper' elbiseleri. Cloche şapkalar.", imagePlaceholder: "1920ler Kadın Kostümü" },
                        { type: "Erkek", description: "Üç parçalı takım elbiseler, geniş yakalı gömlekler, fedora şapkalar ve yelekler. Gangster tarzı.", imagePlaceholder: "1920ler Erkek Kostümü" },
                        { type: "Halk", description: "Günlük kullanım için daha sade elbiseler ve iş kıyafetleri.", imagePlaceholder: "1920ler Halk Kostümü" },
                        { type: "Haute Couture", description: "Dönemin önde gelen moda evlerinin tasarladığı, daha gösterişli elbiseler, kürkler, uzun inciler ve eldivenler.", imagePlaceholder: "1920ler Haute Couture" },
                        { type: "Askeri", description: "Savaş sonrası dönemde daha çok üniformalar ve sivil kıyafetlere geçiş.", imagePlaceholder: "1920ler Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Art Deco mimarisi yükselişe geçti. Geometrik şekler, zengin süslemeler ve lüks malzemelerle karakterize edilir. New York'taki Chrysler Binası gibi örnekler.", imagePlaceholder: "1920ler Mimari" }
                    ]
                },
                "1940lar": {
                    title: "1940'lar (Savaş Yılları)",
                    description: "II. Dünya Savaşı'nın etkisiyle giyimde pratiklik ve fonksiyonelliğin ön plana çıktığı, kumaş kısıtlamalarının olduğu dönem.",
                    influencers: ["Dönemin Anonim Tasarımcıları (Kısıtlamalar Altında)"],
                    costumes: [
                        { type: "Kadın", description: "Omuzları vatkalı, dar kesim etek takımları, düz ayakkabılar. Saçlar topuz veya rulo şeklinde.", imagePlaceholder: "1940lar Kadın Kostümü" },
                        { type: "Erkek", description: "Sade, az kumaş kullanılan takım elbiseler. Üniformalar yaygındı.", imagePlaceholder: "1940lar Erkek Kostümü" },
                        { type: "Halk", description: "Kumaş tasarrufu sağlayan, dayanıklı ve basit giysiler.", imagePlaceholder: "1940lar Halk Kostümü" },
                        { type: "Haute Couture", description: "Dönemin moda kısıtlamalarına rağmen şıklığı koruyan, daha gösterişli kıyafetler. Lüks azalmış olsa da zarafet devam etti.", imagePlaceholder: "1940lar Haute Couture" },
                        { type: "Askeri", description: "Çeşitli orduların standart askeri üniformaları. İşlevsellik ön plandaydı.", imagePlaceholder: "1940lar Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Savaş sonrası yeniden yapılanma dönemi. Daha çok fonksiyonel, basit ve seri üretime uygun yapılar. Art Deco'nun son etkileri ve modern mimarinin başlangıcı.", imagePlaceholder: "1940lar Mimari" }
                    ]
                },
                "1950ler": {
                    title: "1950'ler (Rock'n Roll Çağı)",
                    description: "Savaş sonrası ekonomik refahın arttığı, Rock'n Roll müziğinin yükselişe geçtiği, kadınlarda 'New Look'un popülerleştiği dönem.",
                    influencers: ["Christian Dior (Moda Tasarımcısı)", "Mies van der Rohe (Mimar)", "Le Corbusier (Mimar)"],
                    costumes: [
                        { type: "Kadın", description: "Kabarık etekler, dar beller, dirsek boyu eldivenler. Christian Dior'un 'New Look'u.", imagePlaceholder: "1950ler Kadın Kostümü" },
                        { type: "Erkek", description: "Kravatlı, dar kesim takım elbiseler. Gençler arasında tişörtler ve jeanler popülerleşti.", imagePlaceholder: "1950ler Erkek Kostümü" },
                        { type: "Halk", description: "Ev hanımları için pratik elbiseler, işçiler için dayanıklı giysiler.", imagePlaceholder: "1950ler Halk Kostümü" },
                        { type: "Haute Couture", description: "Dönemin önde gelen moda evlerinin tasarımları, daha şık ve couture tasarımlar, lüks aksesuarlar.", imagePlaceholder: "1950ler Haute Couture" },
                        { type: "Askeri", description: "Kore Savaşı dönemi üniformaları ve soğuk savaş etkileri.", imagePlaceholder: "1950ler Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Modern mimaride yalınlık ve fonksiyonellik ön plandaydı. suburban evler (banliyö evleri) ve otoyolların artışı. Mid-century modern tarzı.", imagePlaceholder: "1950ler Mimari" }
                    ]
                },
                "1970ler": {
                    title: "1970'ler (Disko ve Hippie Etkisi)",
                    description: "Bireyselliğin ve özgürlüğün ön plana çıktığı, disko, punk ve hippie akımlarının modayı etkilediği renkli ve çeşitli bir dönem.",
                    influencers: ["Andy Warhol (Pop Art Sanatçısı - etkisi devam eden)", "Robert Venturi (Postmodern Mimar)"],
                    costumes: [
                        { type: "Kadın", description: "Uzun etekler, İspanyol paça pantolonlar, tulumlar, disko kıyafetleri, çiçekli desenler.", imagePlaceholder: "1970ler Kadın Kostümü" },
                        { type: "Erkek", description: "İspanyol paça pantolonlar, geniş yakalı gömlekler, bol kesim ceketler. Disko ve süet detaylar.", imagePlaceholder: "1970ler Erkek Kostümü" },
                        { type: "Halk", description: "Daha rahat ve bol kesim günlük giysiler, jeanler ve tişörtler.", imagePlaceholder: "1970ler Halk Kostümü" },
                        { type: "Haute Couture", description: "Dönemin lüks moda evlerinden çıkan, daha lüks kumaşlardan yapılmış şık elbiseler ve takımlar, ancak dönemin rahatlığı hissedilirdi.", imagePlaceholder: "1970ler Haute Couture" },
                        { type: "Askeri", description: "Vietnam Savaşı sonrası döneme ait üniformalar, kamuflaj desenleri.", imagePlaceholder: "1970ler Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Brütalizm ve Postmodernizm'in yükselişi. Betonın kullanımı, karmaşık geometrik formlar ve eklektik stiller.", imagePlaceholder: "1970ler Mimari" }
                    ]
                },
                "1980ler": {
                    title: "1980'ler (Neşeli Yıllar)",
                    description: "Büyük omuz vatkaları, neon renkler, spor giyim ve pop kültürünün moda üzerindeki güçlü etkisiyle bilinen bir dönem.",
                    influencers: ["Jean-Michel Basquiat (Ressam)", "Keith Haring (Ressam)", "Philip Johnson (Mimar)", "Michael Graves (Mimar)"],
                    costumes: [
                        { type: "Kadın", description: "Büyük vatkalı ceketler ve bluzlar, taytlar, mini etekler, parlak renkler. Saçlar kabarık ve permalı.", imagePlaceholder: "1980ler Kadın Kostümü" },
                        { type: "Erkek", description: "Geniş omuzlu ceketler, takım elbiseler, jeanler, spor ayakkabılar. Pop yıldızlarının tarzları etkiliydi.", imagePlaceholder: "1980ler Erkek Kostümü" },
                        { type: "Halk", description: "Markalı spor giyim, jeanler, sweatshirtler günlük yaşamda popülerdi.", imagePlaceholder: "1980ler Halk Kostümü" },
                        { type: "Haute Couture", description: "Dönemin lüks moda evlerinden çıkan abartılı tasarımlar, lüks markalar, power dressing (güçlü kadın imajı).", imagePlaceholder: "1980ler Haute Couture" },
                        { type: "Askeri", description: "Soğuk Savaş dönemi üniformaları, daha modern teçhizat ve kamuflaj desenleri.", imagePlaceholder: "1980ler Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Postmodern mimarinin gelişimi. Historik referanslar, renkli cepheler, süslemeler ve bazen ironik öğelerle karakterize edilir.", imagePlaceholder: "1980ler Mimari" }
                    ]
                },
                "gunumuz": {
                    title: "Günümüz",
                    description: "Küresel modanın etkisiyle çeşitliliğin arttığı, sürdürülebilrliğin ve kişisel tarzın önem kazandığı modern dönem.",
                    influencers: ["Zaha Hadid (Mimar - etkisi devam eden)", "Frank Gehry (Mimar - etkisi devam eden)", "Çağdaş Moda Tasarımcıları"],
                    costumes: [
                        { type: "Kadın", description: "Her türlü stilin bir arada görüldüğü, spor giyimden minimalist parçalara kadar geniş yelpaze.", imagePlaceholder: "Günümüz Kadın Kostümü" },
                        { type: "Erkek", description: "Smart casual, streetwear, klasik takım elbiseler ve teknolojik kumaşların kullanımı.", imagePlaceholder: "Günümüz Erkek Kostümü" },
                        { type: "Halk", description: "Rahat, fonksiyonel, markalı veya markasız giysiler, spor ayakkabılar.", imagePlaceholder: "Günümüz Halk Kostümü" },
                        { type: "Haute Couture", description: "Lüks markaların ve haute couture'ün öne çıktığı, kişiye özel tasarımlar ve sosyal etkinliklere uygun şık kıyafetler.", imagePlaceholder: "Günümüz Haute Couture" },
                        { type: "Askeri", description: "Teknolojik, ergonomik ve gelişmiş kamuflaj özelliklerine sahip modern askeri üniformalar.", imagePlaceholder: "Günümüz Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Sıfır atık binalar, dikey çiftlikler, akıllı şehir altyapıları, modüler ve 3D baskılı yapılar. Doğa ile entegre tasarımlar.", imagePlaceholder: "Günümüz Mimari" }
                    ]
                },
                "yakin-gelecek": {
                    title: "Yakın Gelecek",
                    description: "Teknolojinin modayı ve yaşam alanlarını daha da entegre edeceği, sürdürülebilir malzemelerin ve akıllı teknolojilerin öne çıkacağı bir gelecek vizyonu.",
                    influencers: ["Yapay Zeka Destekli Tasarımcılar", "Sürdürülebilirlik Uzmanları"],
                    costumes: [
                        { type: "Kadın", description: "Akıllı kumaşlar, değişen renk ve formlar, minimalist ve fonksiyonel tasarımlar. Giyilebilir teknoloji.", imagePlaceholder: "Yakın Gelecek Kadın Kostümü" },
                        { type: "Erkek", description: "Uyarlanabilir giysiler, vücut ısısını düzenleyen kumaşlar, entegre arayüzler ve kişiselleştirilebilir tasarımlar.", imagePlaceholder: "Yakın Gelecek Erkek Kostümü" },
                        { type: "Halk", description: "Çevre dostu, geri dönüştürülebilir malzemelerden yapılmış, unisex ve çok amaçlı giysiler.", imagePlaceholder: "Yakın Gelecek Halk Kostümü" },
                        { type: "Haute Couture", description: "Bireyselliği ve statüyü vurgulayan, özel üretim, belki de holografik veya dinamik tasarımlar. Lüks ve yenilikçi malzemeler.", imagePlaceholder: "Yakın Gelecek Haute Couture" },
                        { type: "Askeri", description: "Yüksek teknoloji entegrasyonuna sahip, hafif, koruyucu ve adaptif askeri üniformalar. Kamuflajda dijitalleşme.", imagePlaceholder: "Yakın Gelecek Askeri Kostümü" }
                    ],
                    architecture: [
                        { type: "Mimari Temelleri", description: "Sıfır atık binalar, dikey çiftlikler, akıllı şehir altyapıları, modüler ve 3D baskılı yapılar. Doğa ile entegre tasarımlar.", imagePlaceholder: "Yakın Gelecek Mimari" }
                    ]
                }
            };

            timelineItems.forEach(item => {
                item.addEventListener('click', () => {
                    const eraKey = item.dataset.era;
                    const eraData = erasData[eraKey];

                    if (eraData) {
                        eraTitle.textContent = eraData.title;
                        
                        // Kostüm görsellerini yükle
                        costumeImagesContainer.innerHTML = `
                            <div class="md:col-span-2 lg:col-span-3 bg-gray-50 p-4 rounded-lg text-gray-700 text-lg">
                                <p>${eraData.description}</p>
                            </div>
                        `; // Her yeni seçimde temizle
                        eraData.costumes.forEach(costume => {
                            const costumeDiv = document.createElement('div');
                            costumeDiv.classList.add('bg-white', 'p-4', 'rounded-lg', 'card'); // Kartın rengi beyaz yapıldı
                            
                            const imageContainerDiv = document.createElement('div');
                            imageContainerDiv.classList.add('image-container', 'mb-3');

                            const imgElement = document.createElement('img');
                            imgElement.alt = `${costume.type} Kostümü`;
                            imgElement.classList.add('rounded-md');
                            
                            // Başlangıçta yer tutucu resmi ayarla
                            imgElement.src = `https://placehold.co/400x300/f0f0f0/333333?text=${encodeURIComponent(costume.imagePlaceholder)}`;
                            
                            // Tıklama animasyonu için olay dinleyici
                            imgElement.addEventListener('click', (event) => {
                                event.stopPropagation(); // Event bubbling'i durdur
                                modalImage.src = imgElement.src;
                                imageModal.style.display = 'flex'; // Modalı görünür yap
                            });

                            imageContainerDiv.appendChild(imgElement);
                            costumeDiv.appendChild(imageContainerDiv);
                            
                            const titleElement = document.createElement('h4');
                            titleElement.classList.add('text-xl', 'font-semibold', 'mb-2', 'text-gray-800');
                            titleElement.textContent = `${costume.type} Kostümü`;
                            costumeDiv.appendChild(titleElement);

                            const descriptionElement = document.createElement('p');
                            descriptionElement.classList.add('text-gray-600', 'text-sm');
                            descriptionElement.textContent = costume.description;
                            costumeDiv.appendChild(descriptionElement);

                            // API Hata Mesajı Alanı
                            const apiErrorMessage = document.createElement('div');
                            apiErrorMessage.classList.add('error-message');
                            apiErrorMessage.textContent = 'API anahtarı eksik veya geçersiz. Lütfen kodunuzdaki apiKey değişkenine kendi Gemini API anahtarınızı ekleyin.';
                            costumeDiv.appendChild(apiErrorMessage);

                            // Gemini API özelliği için buton ve metin alanı (İçgörü Üret)
                            const generateInsightButton = document.createElement('button');
                            generateInsightButton.classList.add('mt-4', 'bg-gray-700', 'hover:bg-gray-900', 'text-white', 'font-bold', 'py-2', 'px-4', 'rounded-full', 'transition-colors', 'duration-300', 'w-full');
                            generateInsightButton.innerHTML = 'İçgörü Üret ✨';
                            costumeDiv.appendChild(generateInsightButton);

                            const insightDisplay = document.createElement('div');
                            insightDisplay.classList.add('insight-text');
                            costumeDiv.appendChild(insightDisplay);

                            // Loading indicator for insight
                            const loadingInsightIndicator = document.createElement('div');
                            loadingInsightIndicator.classList.add('loading-indicator');
                            loadingInsightIndicator.textContent = 'Yükleniyor...';
                            costumeDiv.appendChild(loadingInsightIndicator);

                            // Modern Adaptasyon Fikri Üret butonu
                            const generateAdaptationButton = document.createElement('button');
                            generateAdaptationButton.classList.add('mt-2', 'bg-purple-600', 'hover:bg-purple-800', 'text-white', 'font-bold', 'py-2', 'px-4', 'rounded-full', 'transition-colors', 'duration-300', 'w-full');
                            generateAdaptationButton.innerHTML = 'Modern Adaptasyon Fikri Üret ✨';
                            costumeDiv.appendChild(generateAdaptationButton);

                            const adaptationDisplay = document.createElement('div');
                            adaptationDisplay.classList.add('adaptation-text');
                            costumeDiv.appendChild(adaptationDisplay);

                            const loadingAdaptationIndicator = document.createElement('div');
                            loadingAdaptationIndicator.classList.add('loading-indicator');
                            loadingAdaptationIndicator.textContent = 'Yükleniyor...';
                            costumeDiv.appendChild(loadingAdaptationIndicator);

                            // Image generation button for all costumes
                            const generateImageButton = document.createElement('button');
                            generateImageButton.classList.add('mt-2', 'bg-blue-600', 'hover:bg-blue-800', 'text-white', 'font-bold', 'py-2', 'px-4', 'rounded-full', 'transition-colors', 'duration-300', 'w-full');
                            generateImageButton.innerHTML = 'Görsel Üret 🖼️';
                            costumeDiv.appendChild(generateImageButton);

                            const imageLoadingIndicator = document.createElement('div');
                            imageLoadingIndicator.classList.add('image-loading-indicator');
                            imageLoadingIndicator.textContent = 'Görsel Yükleniyor...';
                            costumeDiv.appendChild(imageLoadingIndicator);


                            generateImageButton.addEventListener('click', async () => {
                                apiErrorMessage.style.display = 'none'; // Hata mesajını gizle
                                imageLoadingIndicator.style.display = 'block';
                                imgElement.src = `https://placehold.co/400x300/e0e0e0/333333?text=Yükleniyor...`; // Geçici yüklenme görseli

                                const imagePrompt = costume.imagePrompt; // Dinamik prompt kullanımı
                                
                                // BURAYA KENDİ GEMINI API ANAHTARINIZI YAPIŞTIRIN (1. YER)
                                // Bir Google Cloud projesi oluşturup Gemini API'yi etkinleştirerek anahtar alabilirsiniz.
                                // https://aistudio.google.com/app/apikey adresinden de alabilirsiniz.
                                const apiKey = "AIzaSyDJ-2CwiuwJOSI8SoECbRBxjG830Rsrcm0"; // <-- BU SATIRI GÜNCELLEYİN!

                                if (!apiKey || apiKey === "YOUR_API_KEY_HERE_1") {
                                    apiErrorMessage.style.display = 'block';
                                    imageLoadingIndicator.style.display = 'none';
                                    imgElement.src = `https://placehold.co/400x300/e0e0e0/333333?text=API+Anahtarı+Yok`;
                                    return;
                                }

                                const payload = { instances: { prompt: imagePrompt }, parameters: { "sampleCount": 1} };
                                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${apiKey}`;

                                try {
                                    const response = await fetch(apiUrl, {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify(payload)
                                    });

                                    if (!response.ok) {
                                        const errorText = await response.text();
                                        console.error(`[ERROR] API HTTP Hatası: ${response.status} ${response.statusText} - ${errorText}`);
                                        apiErrorMessage.textContent = `Görsel API Hatası: ${response.status} - ${errorText.substring(0, 100)}...`;
                                        apiErrorMessage.style.display = 'block';
                                        imgElement.src = `https://placehold.co/400x300/e0e0e0/333333?text=Hata+Oluştu`;
                                        return;
                                    }

                                    const result = await response.json();
                                    if (result.predictions && result.predictions.length > 0 && result.predictions[0].bytesBase64Encoded) {
                                        const imageUrl = `data:image/png;base64,${result.predictions[0].bytesBase64Encoded}`;
                                        imgElement.src = imageUrl;
                                    } else {
                                        imgElement.src = `https://placehold.co/400x300/e0e0e0/333333?text=Görsel+Üretilemedi`;
                                    }
                                } catch (error) {
                                    console.error('Görsel API çağrısı sırasında bir hata oluştu:', error);
                                    apiErrorMessage.textContent = `Görsel API çağrısı sırasında bir hata oluştu: ${error.message}`;
                                    apiErrorMessage.style.display = 'block';
                                    imgElement.src = `https://placehold.co/400x300/e0e0e0/333333?text=Hata+Oluştu`;
                                } finally {
                                    imageLoadingIndicator.style.display = 'none';
                                }
                            });


                            generateInsightButton.addEventListener('click', async () => {
                                apiErrorMessage.style.display = 'none'; // Hata mesajını gizle
                                loadingInsightIndicator.style.display = 'block';
                                insightDisplay.style.display = 'none'; // Önceki içgörüyü gizle
                                insightDisplay.textContent = ''; // Metni temizle

                                let prompt;
                                if (eraKey === 'yakin-gelecek') {
                                    prompt = `Yakın gelecekteki ${costume.type} kostümünün nasıl olabileceğine dair kısa bir senaryo veya tahmin üret.`;
                                } else {
                                    prompt = `Bu ${eraData.title} dönemindeki ${costume.type} kostümü hakkında kısa, ilginç bir tarihsel bilgi veya sosyal yorum üret.`;
                                }

                                if (eraData.influencers && eraData.influencers.length > 0) {
                                    prompt += ` Bu dönemin önde gelen sanatçıları/mimarları arasında ${eraData.influencers.join(', ')} bulunmaktadır. Onların moda ve mimariye etkilerinden de bahsedebilir misin?`;
                                }
                                
                                let chatHistory = [];
                                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                                const payload = { contents: chatHistory };
                                // BURAYA KENDİ GEMINI API ANAHTARINIZI YAPIŞTIRIN (2. YER)
                                // Bir Google Cloud projesi oluşturup Gemini API'yi etkinleştirerek anahtar alabilirsiniz.
                                // https://aistudio.google.com/app/apikey adresinden de alabilirsiniz.
                                const apiKey = "AIzaSyDJ-2CwiuwJOSI8SoECbRBxjG830Rsrcm0"; // <-- BU SATIRI GÜNCELLEYİN!

                                if (!apiKey || apiKey === "YOUR_API_KEY_HERE_2") {
                                    apiErrorMessage.style.display = 'block';
                                    loadingInsightIndicator.style.display = 'none';
                                    insightDisplay.textContent = '';
                                    return;
                                }

                                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                                try {
                                    const response = await fetch(apiUrl, {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify(payload)
                                    });

                                    if (!response.ok) {
                                        const errorText = await response.text();
                                        apiErrorMessage.textContent = `İçgörü API Hatası: ${response.status} - ${errorText.substring(0, 100)}...`;
                                        apiErrorMessage.style.display = 'block';
                                        return;
                                    }

                                    const result = await response.json();
                                    if (result.candidates && result.candidates.length > 0 &&
                                        result.candidates[0].content && result.candidates[0].content.parts &&
                                        result.candidates[0].content.parts.length > 0) {
                                        const text = result.candidates[0].content.parts[0].text;
                                        insightDisplay.textContent = text;
                                        insightDisplay.style.display = 'block';
                                    } else {
                                        insightDisplay.textContent = 'İçgörü üretilemedi.';
                                        insightDisplay.style.display = 'block';
                                    }
                                } catch (error) {
                                    console.error('API çağrısı hatası:', error);
                                    apiErrorMessage.textContent = `İçgörü API çağrısı sırasında bir hata oluştu: ${error.message}`;
                                    apiErrorMessage.style.display = 'block';
                                } finally {
                                    loadingInsightIndicator.style.display = 'none';
                                }
                            });

                            generateAdaptationButton.addEventListener('click', async () => {
                                apiErrorMessage.style.display = 'none'; // Hata mesajını gizle
                                loadingAdaptationIndicator.style.display = 'block';
                                adaptationDisplay.style.display = 'none';
                                adaptationDisplay.textContent = '';

                                let prompt = `Generate a creative and concise idea for a modern adaptation of a ${costume.type} costume from the ${eraData.title} period. Focus on how it could be reinterpreted for contemporary fashion, incorporating modern materials, technologies, or cultural influences.`;
                                
                                let chatHistory = [];
                                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                                const payload = { contents: chatHistory };
                                // BURAYA KENDİ GEMINI API ANAHTARINIZI YAPIŞTIRIN (3. YER)
                                // Bir Google Cloud projesi oluşturup Gemini API'yi etkinleştirerek anahtar alabilirsiniz.
                                // https://aistudio.google.com/app/apikey adresinden de alabilirsiniz.
                                const apiKey = "AIzaSyDJ-2CwiuwJOSI8SoECbRBxjG830Rsrcm0"; // <-- BU SATIRI GÜNCELLEYİN!

                                if (!apiKey || apiKey === "YOUR_API_KEY_HERE_3") {
                                    apiErrorMessage.style.display = 'block';
                                    loadingAdaptationIndicator.style.display = 'none';
                                    adaptationDisplay.textContent = '';
                                    return;
                                }

                                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                                try {
                                    const response = await fetch(apiUrl, {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify(payload)
                                    });

                                    if (!response.ok) {
                                        const errorText = await response.text();
                                        apiErrorMessage.textContent = `Adaptasyon API Hatası: ${response.status} - ${errorText.substring(0, 100)}...`;
                                        apiErrorMessage.style.display = 'block';
                                        return;
                                    }

                                    const result = await response.json();
                                    if (result.candidates && result.candidates.length > 0 &&
                                        result.candidates[0].content && result.candidates[0].content.parts &&
                                        result.candidates[0].content.parts.length > 0) {
                                        const text = result.candidates[0].content.parts[0].text;
                                        adaptationDisplay.textContent = text;
                                        adaptationDisplay.style.display = 'block';
                                    } else {
                                        adaptationDisplay.textContent = 'Modern adaptasyon fikri üretilemedi.';
                                        adaptationDisplay.style.display = 'block';
                                    }
                                } catch (error) {
                                    console.error('Modern adaptasyon API çağrısı hatası:', error);
                                    apiErrorMessage.textContent = `Modern adaptasyon API çağrısı sırasında bir hata oluştu: ${error.message}`;
                                    apiErrorMessage.style.display = 'block';
                                } finally {
                                    loadingAdaptationIndicator.style.display = 'none';
                                }
                            });

                            costumeImagesContainer.appendChild(costumeDiv);
                        });

                        // Mimari detaylarını yükle
                        architectureDetailsContainer.innerHTML = ''; // Her yeni seçimde temizle
                        eraData.architecture.forEach(arch => {
                            const archDiv = document.createElement('div');
                            archDiv.classList.add('bg-white', 'p-4', 'rounded-lg', 'card'); // Kartın rengi beyaz yapıldı
                            
                            const imageContainerDiv = document.createElement('div');
                            imageContainerDiv.classList.add('image-container', 'mb-3');

                            const imgElement = document.createElement('img');
                            imgElement.alt = arch.type;
                            imgElement.classList.add('rounded-md');
                            
                            // Başlangıçta yer tutucu resmi ayarla
                            imgElement.src = `https://placehold.co/600x400/f0f0f0/333333?text=${encodeURIComponent(arch.imagePlaceholder)}`;
                            
                            // Tıklama animasyonu için olay dinleyici
                            imgElement.addEventListener('click', (event) => {
                                event.stopPropagation(); // Event bubbling'i durdur
                                modalImage.src = imgElement.src;
                                imageModal.style.display = 'flex'; // Modalı görünür yap
                            });

                            imageContainerDiv.appendChild(imgElement);
                            archDiv.appendChild(imageContainerDiv);

                            const titleElement = document.createElement('h4');
                            titleElement.classList.add('text-xl', 'font-semibold', 'mb-2', 'text-gray-800');
                            titleElement.textContent = arch.type;
                            archDiv.appendChild(titleElement);

                            const descriptionElement = document.createElement('p');
                            descriptionElement.classList.add('text-gray-600', 'text-sm');
                            descriptionElement.textContent = arch.description;
                            archDiv.appendChild(descriptionElement);

                            // API Hata Mesajı Alanı
                            const apiErrorMessage = document.createElement('div');
                            apiErrorMessage.classList.add('error-message');
                            apiErrorMessage.textContent = 'API anahtarı eksik veya geçersiz. Lütfen kodunuzdaki apiKey değişkenine kendi Gemini API anahtarınızı ekleyin.';
                            archDiv.appendChild(apiErrorMessage);

                            // Gemini API özelliği için buton ve metin alanı (İçgörü Üret)
                            const generateInsightButton = document.createElement('button');
                            generateInsightButton.classList.add('mt-4', 'bg-gray-700', 'hover:bg-gray-900', 'text-white', 'font-bold', 'py-2', 'px-4', 'rounded-full', 'transition-colors', 'duration-300', 'w-full');
                            generateInsightButton.innerHTML = 'İçgörü Üret ✨';
                            archDiv.appendChild(generateInsightButton);

                            const insightDisplay = document.createElement('div');
                            insightDisplay.classList.add('insight-text');
                            archDiv.appendChild(insightDisplay);

                            // Loading indicator for insight
                            const loadingInsightIndicator = document.createElement('div');
                            loadingInsightIndicator.classList.add('loading-indicator');
                            loadingInsightIndicator.textContent = 'Yükleniyor...';
                            archDiv.appendChild(loadingInsightIndicator);

                            // Modern Adaptasyon Fikri Üret butonu
                            const generateAdaptationButton = document.createElement('button');
                            generateAdaptationButton.classList.add('mt-2', 'bg-purple-600', 'hover:bg-purple-800', 'text-white', 'font-bold', 'py-2', 'px-4', 'rounded-full', 'transition-colors', 'duration-300', 'w-full');
                            generateAdaptationButton.innerHTML = 'Modern Adaptasyon Fikri Üret ✨';
                            archDiv.appendChild(generateAdaptationButton);

                            const adaptationDisplay = document.createElement('div');
                            adaptationDisplay.classList.add('adaptation-text');
                            archDiv.appendChild(adaptationDisplay);

                            const loadingAdaptationIndicator = document.createElement('div');
                            loadingAdaptationIndicator.classList.add('loading-indicator');
                            loadingAdaptationIndicator.textContent = 'Yükleniyor...';
                            archDiv.appendChild(loadingAdaptationIndicator);

                            // Image generation button for all architecture
                            const generateImageButton = document.createElement('button');
                            generateImageButton.classList.add('mt-2', 'bg-blue-600', 'hover:bg-blue-800', 'text-white', 'font-bold', 'py-2', 'px-4', 'rounded-full', 'transition-colors', 'duration-300', 'w-full');
                            generateImageButton.innerHTML = 'Görsel Üret 🖼️';
                            archDiv.appendChild(generateImageButton);

                            const imageLoadingIndicator = document.createElement('div');
                            imageLoadingIndicator.classList.add('image-loading-indicator');
                            imageLoadingIndicator.textContent = 'Görsel Yükleniyor...';
                            archDiv.appendChild(imageLoadingIndicator);


                            generateImageButton.addEventListener('click', async () => {
                                apiErrorMessage.style.display = 'none'; // Hata mesajını gizle
                                imageLoadingIndicator.style.display = 'block';
                                imgElement.src = `https://placehold.co/600x400/e0e0e0/333333?text=Yükleniyor...`; // Geçici yüklenme görseli

                                const imagePrompt = arch.imagePrompt; // Dinamik prompt kullanımı
                                
                                // BURAYA KENDİ GEMINI API ANAHTARINIZI YAPIŞTIRIN (4. YER)
                                // Bir Google Cloud projesi oluşturup Gemini API'yi etkinleştirerek anahtar alabilirsiniz.
                                // https://aistudio.google.com/app/apikey adresinden de alabilirsiniz.
                                const apiKey = "AIzaSyDJ-2CwiuwJOSI8SoECbRBxjG830Rsrcm0"; // <-- BU SATIRI GÜNCELLEYİN!

                                if (!apiKey || apiKey === "YOUR_API_KEY_HERE_4") {
                                    apiErrorMessage.style.display = 'block';
                                    imageLoadingIndicator.style.display = 'none';
                                    imgElement.src = `https://placehold.co/600x400/e0e0e0/333333?text=API+Anahtarı+Yok`;
                                    return;
                                }

                                const payload = { instances: { prompt: imagePrompt }, parameters: { "sampleCount": 1} };
                                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${apiKey}`;

                                try {
                                    const response = await fetch(apiUrl, {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify(payload)
                                    });

                                    if (!response.ok) {
                                        const errorText = await response.text();
                                        console.error(`[ERROR] API HTTP Hatası: ${response.status} ${response.statusText} - ${errorText}`);
                                        apiErrorMessage.textContent = `Görsel API Hatası: ${response.status} - ${errorText.substring(0, 100)}...`;
                                        apiErrorMessage.style.display = 'block';
                                        imgElement.src = `https://placehold.co/600x400/e0e0e0/333333?text=Hata+Oluştu`;
                                        return;
                                    }

                                    const result = await response.json();
                                    if (result.predictions && result.predictions.length > 0 && result.predictions[0].bytesBase64Encoded) {
                                        const imageUrl = `data:image/png;base64,${result.predictions[0].bytesBase64Encoded}`;
                                        imgElement.src = imageUrl;
                                    } else {
                                        imgElement.src = `https://placehold.co/600x400/e0e0e0/333333?text=Görsel+Üretilemedi`;
                                    }
                                } catch (error) {
                                    console.error('Görsel API çağrısı sırasında bir hata oluştu:', error);
                                    apiErrorMessage.textContent = `Görsel API çağrısı sırasında bir hata oluştu: ${error.message}`;
                                    apiErrorMessage.style.display = 'block';
                                    imgElement.src = `https://placehold.co/600x400/e0e0e0/333333?text=Hata+Oluştu`;
                                } finally {
                                    imageLoadingIndicator.style.display = 'none';
                                }
                            });

                            generateInsightButton.addEventListener('click', async () => {
                                apiErrorMessage.style.display = 'none'; // Hata mesajını gizle
                                loadingInsightIndicator.style.display = 'block';
                                insightDisplay.style.display = 'none'; // Önceki içgörüyü gizle
                                insightDisplay.textContent = ''; // Metni temizle

                                let prompt;
                                if (eraKey === 'yakin-gelecek') {
                                    prompt = `Yakın gelecekteki ${arch.type} mimarisinin nasıl olabileceğine dair kısa bir senaryo veya tahmin üret.`;
                                } else {
                                    prompt = `Bu ${eraData.title} dönemindeki ${arch.type} mimarisi hakkında kısa, ilginç bir tarihsel bilgi veya dönemin mimari yaklaşımları hakkında bir yorum üret.`;
                                }

                                if (eraData.influencers && eraData.influencers.length > 0) {
                                    prompt += ` Bu dönemin önde gelen sanatçıları/mimarları arasında ${eraData.influencers.join(', ')} bulunmaktadır. Onların moda ve mimariye etkilerinden de bahsedebilir misin?`;
                                }
                                
                                let chatHistory = [];
                                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                                const payload = { contents: chatHistory };
                                // BURAYA KENDİ GEMINI API ANAHTARINIZI YAPIŞTIRIN (5. YER)
                                // Bir Google Cloud projesi oluşturup Gemini API'yi etkinleştirerek anahtar alabilirsiniz.
                                // https://aistudio.google.com/app/apikey adresinden de alabilirsiniz.
                                const apiKey = "AIzaSyDJ-2CwiuwJOSI8SoECbRBxjG830Rsrcm0"; // <-- BU SATIRI GÜNCELLEYİN!

                                if (!apiKey || apiKey === "YOUR_API_KEY_HERE_5") {
                                    apiErrorMessage.style.display = 'block';
                                    loadingInsightIndicator.style.display = 'none';
                                    insightDisplay.textContent = '';
                                    return;
                                }

                                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                                try {
                                    const response = await fetch(apiUrl, {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify(payload)
                                    });

                                    if (!response.ok) {
                                        const errorText = await response.text();
                                        apiErrorMessage.textContent = `İçgörü API Hatası: ${response.status} - ${errorText.substring(0, 100)}...`;
                                        apiErrorMessage.style.display = 'block';
                                        return;
                                    }

                                    const result = await response.json();
                                    if (result.candidates && result.candidates.length > 0 &&
                                        result.candidates[0].content && result.candidates[0].content.parts &&
                                        result.candidates[0].content.parts.length > 0) {
                                        const text = result.candidates[0].content.parts[0].text;
                                        insightDisplay.textContent = text;
                                        insightDisplay.style.display = 'block';
                                    } else {
                                        insightDisplay.textContent = 'İçgörü üretilemedi.';
                                        insightDisplay.style.display = 'block';
                                    }
                                } catch (error) {
                                    console.error('API çağrısı hatası:', error);
                                    apiErrorMessage.textContent = `İçgörü API çağrısı sırasında bir hata oluştu: ${error.message}`;
                                    apiErrorMessage.style.display = 'block';
                                } finally {
                                    loadingInsightIndicator.style.display = 'none';
                                }
                            });

                            generateAdaptationButton.addEventListener('click', async () => {
                                loadingAdaptationIndicator.style.display = 'block';
                                adaptationDisplay.style.display = 'none';
                                adaptationDisplay.textContent = '';

                                let prompt = `Generate a creative and concise idea for a modern adaptation of ${arch.type} architecture from the ${eraData.title} period. Focus on how it could be reinterpreted for contemporary design, incorporating modern materials, technologies, or environmental considerations.`;
                                
                                let chatHistory = [];
                                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                                const payload = { contents: chatHistory };
                                // BURAYA KENDİ GEMINI API ANAHTARINIZI YAPIŞTIRIN (6. YER)
                                // Bir Google Cloud projesi oluşturup Gemini API'yi etkinleştirerek anahtar alabilirsiniz.
                                // https://aistudio.google.com/app/apikey adresinden de alabilirsiniz.
                                const apiKey = "AIzaSyDJ-2CwiuwJOSI8SoECbRBxjG830Rsrcm0"; // <-- BU SATIRI GÜNCELLEYİN!

                                if (!apiKey || apiKey === "YOUR_API_KEY_HERE_6") {
                                    apiErrorMessage.style.display = 'block';
                                    loadingAdaptationIndicator.style.display = 'none';
                                    adaptationDisplay.textContent = '';
                                    return;
                                }

                                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                                try {
                                    const response = await fetch(apiUrl, {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify(payload)
                                    });

                                    if (!response.ok) {
                                        const errorText = await response.text();
                                        apiErrorMessage.textContent = `Adaptasyon API Hatası: ${response.status} - ${errorText.substring(0, 100)}...`;
                                        apiErrorMessage.style.display = 'block';
                                        return;
                                    }

                                    const result = await response.json();
                                    if (result.candidates && result.candidates.length > 0 &&
                                        result.candidates[0].content && result.candidates[0].content.parts &&
                                        result.candidates[0].content.parts.length > 0) {
                                        const text = result.candidates[0].content.parts[0].text;
                                        adaptationDisplay.textContent = text;
                                        adaptationDisplay.style.display = 'block';
                                    } else {
                                        adaptationDisplay.textContent = 'Modern adaptasyon fikri üretilemedi.';
                                        adaptationDisplay.style.display = 'block';
                                    }
                                } catch (error) {
                                    console.error('Modern adaptasyon API çağrısı hatası:', error);
                                    apiErrorMessage.textContent = `Modern adaptasyon API çağrısı sırasında bir hata oluştu: ${error.message}`;
                                    apiErrorMessage.style.display = 'block';
                                } finally {
                                    loadingAdaptationIndicator.style.display = 'none';
                                }
                            });

                            architectureDetailsContainer.appendChild(archDiv);
                        });

                        timelineSection.classList.add('hidden');
                        eraDetailsSection.classList.remove('hidden');
                    }
                });
            });

            // Modal kapatma olay dinleyicileri
            closeModal.addEventListener('click', () => {
                imageModal.style.display = 'none';
            });

            imageModal.addEventListener('click', (event) => {
                // Sadece modal arka planına tıklanınca kapansın, resme tıklanınca değil
                if (event.target === imageModal) {
                    imageModal.style.display = 'none';
                }
            });

            backToTimelineButton.addEventListener('click', () => {
                eraDetailsSection.classList.add('hidden');
                timelineSection.classList.remove('hidden');
            });
        });
    </script>
</body>
</html>
